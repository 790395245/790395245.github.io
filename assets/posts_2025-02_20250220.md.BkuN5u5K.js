import{_ as s,c as a,G as i,J as e,C as n,a4 as l,V as t,b as r,B as p,D as h}from"./chunks/framework.DULpp8DO.js";const d=JSON.parse('{"title":"VitePress适配Mermaid经验记录","description":"VitePress适配Mermaid经验记录","frontmatter":{"title":"VitePress适配Mermaid经验记录","filename":20250220,"tags":["VitePress","Mermaid","Markdown"],"categories":["技术分享"],"date":"2025-02-20T00:00:00.000Z","description":"VitePress适配Mermaid经验记录","articleGPT":"在尝试将Mermaid图表集成到VitePress项目中，我经历了安装依赖、配置VitePress和解决集成问题三个阶段。首先，在package.json中添加了vitepress-plugin-mermaid插件，并通过npm和pnpm命令安装。然而，安装后并未立即起作用。经过查阅相关issue，我对VitePress配置文件进行了修改，启用了Mermaid插件，并解决了Markdown集成问题。最终，在我的努力下，VitePress成功支持了Mermaid图表功能，为文档站点增色不少。这次经验让我深刻体会到解决问题的喜悦和成就感。","top":null,"share":true,"delete":false,"cover":"https://cdn.rz15.cn/uploads/2025/02/Snipaste_2025-02-19_20-45-36.png","head":[["link",{"rel":"canonical","href":"https://ruo.ge/posts/2025-02/20250220"}]]},"headers":[],"relativePath":"posts/2025-02/20250220.md","filePath":"posts/2025-02/20250220.md","lastUpdated":1758855969000}');const o=s({name:"posts/2025-02/20250220.md"},[["render",function(s,d,o,k,c,E){const m=t("Mermaid");return r(),a("div",null,[d[4]||(d[4]=i('<h1 id="vitepress适配mermaid经验记录" tabindex="-1">VitePress适配Mermaid经验记录 <a class="header-anchor" href="#vitepress适配mermaid经验记录" aria-label="Permalink to &quot;VitePress适配Mermaid经验记录&quot;">​</a></h1><p>在尝试将Mermaid图表支持引入到我的VitePress项目中，我经历了以下步骤和解决方案。</p><h2 id="步骤-1-安装依赖" tabindex="-1">步骤 1: 安装依赖 <a class="header-anchor" href="#步骤-1-安装依赖" aria-label="Permalink to &quot;步骤 1: 安装依赖&quot;">​</a></h2><p>首先，我需要确保安装了<code>vitepress-plugin-mermaid</code>插件。</p><ol><li>在<code>package.json</code>中添加了如下依赖项：</li></ol><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;devDependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>\n<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;vitepress-plugin-mermaid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^版本号&quot;</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="2"><li>使用以下命令安装插件及其依赖：</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>\n<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><pre><code>这将更新`package-lock.json`和`pnpm-lock.yaml`文件。\n</code></pre><h2 id="步骤-2-配置vitepress" tabindex="-1">步骤 2: 配置VitePress <a class="header-anchor" href="#步骤-2-配置vitepress" aria-label="Permalink to &quot;步骤 2: 配置VitePress&quot;">​</a></h2><p>安装完成后，我发现插件并未按预期工作。经过一番搜索，我在GitHub的<a href="https://github.com/emersonbottero/vitepress-plugin-mermaid/issues/78" target="_blank" rel="noreferrer">这个issue</a>中找到了解决方案。</p><ol><li>修改<code>.vitepress/config.mjs</code>文件，加入了以下内容：</li></ol><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { withMermaid, MermaidPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;vitepress-plugin-mermaid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> defineConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    title: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;VitePress&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    vite: {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    plugins: [</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MermaidPlugin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()],</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    optimizeDeps: {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        include: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mermaid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ssr: {</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        noExternal: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mermaid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="2"><li>接着，我还需要修改<code>.vitepress/theme/utils/markdownConfig.mjs</code>文件，以便Mermaid能够与Markdown集成：</li></ol><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MermaidMarkdown, MermaidPlugin } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress-plugin-mermaid&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 在markdown配置中使用MermaidMarkdown</span></span>\n<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">md.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(MermaidMarkdown);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>完成这些修改后，我的VitePress项目最终成功支持了Mermaid图表。</p><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>通过以上步骤，我学会了如何将Mermaid集成到VitePress中，并且解决了一些初装后不起作用的问题。希望这份记录对其他人有所帮助。</p><h2 id="展示" tabindex="-1">展示 <a class="header-anchor" href="#展示" aria-label="Permalink to &quot;展示&quot;">​</a></h2><p>下面是一个Mermaid图表的示例：</p>',20)),(r(),e(l,null,{default:n((()=>[p(m,{id:"mermaid-66",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20A%5B%E5%BC%80%E5%A7%8B%5D%20--%3E%20B%7B%E5%86%B3%E7%AD%96%7D%0A%20%20%20%20B%20--%3E%7C%E6%98%AF%7C%20C%5B%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A11%5D%0A%20%20%20%20C%20--%3E%20D%5B%E6%89%A7%E8%A1%8C%E4%BB%BB%E5%8A%A12%5D%0A%20%20%20%20D%20--%3E%20B%0A%20%20%20%20B%20--%3E%7C%E5%90%A6%7C%20E%5B%E7%BB%93%E6%9D%9F%5D%0A%20%20%20%20style%20A%20fill%3A%23f96%2C%20color%3Awhite%2C%20stroke-width%3A2px%0A%20%20%20%20style%20B%20fill%3A%239f9%2C%20color%3Ablack%2C%20stroke-width%3A2px%0A%20%20%20%20style%20C%20fill%3A%236f9%2C%20color%3Awhite%2C%20stroke-width%3A2px%0A%20%20%20%20style%20D%20fill%3A%2309f%2C%20color%3Awhite%2C%20stroke-width%3A2px%0A%20%20%20%20style%20E%20fill%3A%23f99%2C%20color%3Ablack%2C%20stroke-width%3A2px%0A%20%20%20%20linkStyle%200%20stroke%3A%23ff3%2C%20stroke-width%3A4px%0A%20%20%20%20classDef%20className%20fill%3A%23f96%2C%20color%3Awhite%2C%20stroke-width%3A2px%0A%20%20%20%20class%20A%2CC%20className%0A"})])),fallback:n((()=>d[0]||(d[0]=[h(" Loading... ")]))),_:1})),(r(),e(l,null,{default:n((()=>[p(m,{id:"mermaid-67",class:"mermaid",graph:"gantt%0A%20%20%20%20title%20A%20Gantt%20Diagram%0A%20%20%20%20dateFormat%20%20YYYY-MM-DD%0A%20%20%20%20section%20Section%0A%20%20%20%20A%20task%20%20%20%20%20%20%20%20%20%20%20%3Aa1%2C%202023-01-01%2C%203d%0A%20%20%20%20Another%20task%20%20%20%20%20%3Aafter%20a1%20%20%2C%205d%0A%20%20%20%20section%20Another%0A%20%20%20%20Task%20in%20sec%20%20%20%20%20%20%3A2023-01-12%20%20%2C%209d%0A%20%20%20%20another%20task%20%20%20%20%20%3A2023-01-12%20%20%2C%209d%0A"})])),fallback:n((()=>d[1]||(d[1]=[h(" Loading... ")]))),_:1})),(r(),e(l,null,{default:n((()=>[p(m,{id:"mermaid-68",class:"mermaid",graph:"sequenceDiagram%0A%20%20%20%20participant%20Alice%0A%20%20%20%20participant%20Bob%0A%20%20%20%20Alice-%3E%3EJohn%3A%20Hello%20John%2C%20how%20are%20you%3F%0A%20%20%20%20loop%20Healthcheck%0A%20%20%20%20%20%20%20%20John-%3E%3EJohn%3A%20Fight%20against%20hypochondria%0A%20%20%20%20end%0A%20%20%20%20Note%20right%20of%20John%3A%20Rational%20thoughts%20%3Cbr%2F%3Eprevail...%0A%20%20%20%20John--%3E%3EAlice%3A%20Great!%0A%20%20%20%20John-%3E%3EBob%3A%20How%20about%20you%3F%0A%20%20%20%20Bob--%3E%3EJohn%3A%20Jolly%20good!%0A"})])),fallback:n((()=>d[2]||(d[2]=[h(" Loading... ")]))),_:1})),(r(),e(l,null,{default:n((()=>[p(m,{id:"mermaid-69",class:"mermaid",graph:"erDiagram%0A%20%20%20%20CUSTOMER%20%7C%7C--o%7B%20ORDER%20%3A%20places%0A%20%20%20%20ORDER%20%7C%7C--%7C%7B%20LINE-ITEM%20%3A%20contains%0A%20%20%20%20CUSTOMER%20%7B%0A%20%20%20%20%20%20%20%20string%20name%0A%20%20%20%20%20%20%20%20string%20id%0A%20%20%20%20%7D%0A%20%20%20%20ORDER%20%7B%0A%20%20%20%20%20%20%20%20string%20orderNumber%0A%20%20%20%20%20%20%20%20date%20orderDate%0A%20%20%20%20%20%20%20%20string%20customerID%0A%20%20%20%20%7D%0A%20%20%20%20LINE-ITEM%20%7B%0A%20%20%20%20%20%20%20%20number%20quantity%0A%20%20%20%20%20%20%20%20float%20unitPrice%0A%20%20%20%20%20%20%20%20string%20orderNumber%0A%20%20%20%20%7D%0A"})])),fallback:n((()=>d[3]||(d[3]=[h(" Loading... ")]))),_:1}))])}]]);export{d as __pageData,o as default};
